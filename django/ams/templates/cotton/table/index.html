{% load static i18n %}

<div class="overflow-x-auto">
  <table class="min-w-full bg-white">
    <thead class="bg-gray-50">
      <tr>
        {% for header in headers %}
        <th class="px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider"> {{ header }}</th>
        {% endfor %}
      </tr>
    </thead>
    <tbody
      id="tbody"
      class="bg-white divide-y divide-gray-200"
      hx-trigger="{{ trigger }}"
      hx-swap="{{ swap }}"
      hx-get="{{ url }}"
     >

    </tbody>
  </table>
{% if page_obj.has_other_pages %}
<div class="bg-white px-4 flex items-center justify-between border-t border-gray-200 sm:px-6 mt-4">
  <div class="flex-1 flex justify-between sm:hidden">
    {% if page_obj.has_previous %}
      <button hx-get="{% url 'clients:htmx' %}?page={{ page_obj.previous_page_number }}{% if search_query %}&search={{ search_query }}{% endif %}"
              hx-target="#tbody"
              hx-swap="innerHTML"
              class="relative inline-flex items-center px-4 py-2 border border-gray-300 text-sm font-medium rounded-md text-gray-700 bg-white hover:bg-gray-50">
        {% trans 'Previous' %}
      </button>
    {% endif %}
    {% if page_obj.has_next %}
      <button hx-get="{% url 'clients:htmx' %}?page={{ page_obj.next_page_number }}{% if search_query %}&search={{ search_query }}{% endif %}"
              hx-target="#tbody"
              hx-swap="innerHTML"
              class="ml-3 relative inline-flex items-center px-4 py-2 border border-gray-300 text-sm font-medium rounded-md text-gray-700 bg-white hover:bg-gray-50">
        {% trans 'Next' %}
      </button>
    {% endif %}
  </div>
  <div class="hidden sm:flex-1 sm:flex sm:items-center sm:justify-between">
    <div>
      <p class="text-sm text-gray-700">
        {% trans 'Showing' %}
        <span class="font-medium">{{ page_obj.start_index }}</span>
        {% trans 'to' %}
        <span class="font-medium">{{ page_obj.end_index }}</span>
        {% trans 'of' %}
        <span class="font-medium">{{ page_obj.paginator.count }}</span>
        {% trans 'results' %}
      </p>
    </div>
    <div>
      <nav class="relative z-0 inline-flex rounded-md shadow-sm -space-x-px" aria-label="Pagination">
        {% if page_obj.has_previous %}
          <button hx-get="{% url 'clients:htmx' %}?page={{ page_obj.previous_page_number }}{% if search_query %}&search={{ search_query }}{% endif %}"
                  hx-target="#tbody"
                  hx-swap="innerHTML"
                  class="relative inline-flex items-center px-2 py-2 rounded-l-md border border-gray-300 bg-white text-sm font-medium text-gray-500 hover:bg-gray-50">
            <span class="sr-only">{% trans 'Previous' %}</span>
            <i class="bi bi-chevron-left"></i>
          </button>
        {% endif %}
        
        {% for num in page_obj.paginator.page_range %}
          {% if page_obj.number == num %}
            <span class="relative inline-flex items-center px-4 py-2 border border-gray-300 bg-blue-50 text-sm font-medium text-blue-600">
              {{ num }}
            </span>
          {% else %}
            <button hx-get="{% url 'clients:htmx' %}?page={{ num }}{% if search_query %}&search={{ search_query }}{% endif %}"
                    hx-target="#tbody"
                    hx-swap="innerHTML"
                    class="relative inline-flex items-center px-4 py-2 border border-gray-300 bg-white text-sm font-medium text-gray-700 hover:bg-gray-50">
              {{ num }}
            </button>
          {% endif %}
        {% endfor %}
        {% if page_obj.has_next %}
          <button hx-get="{% url 'clients:htmx' %}?page={{ page_obj.next_page_number }}{% if search_query %}&search={{ search_query }}{% endif %}"
                  hx-target="#tbody"
                  hx-swap="innerHTML"
                  class="relative inline-flex items-center px-2 py-2 rounded-r-md border border-gray-300 bg-white text-sm font-medium text-gray-500 hover:bg-gray-50">
            <span class="sr-only">{% trans 'Next' %}</span>
            <i class="bi bi-chevron-right"></i>
          </button>
        {% endif %}
      </nav>
    </div>
  </div>
</div>
</div>
{% endif %}
